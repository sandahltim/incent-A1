{% extends "base.html" %}
{% import "macros.html" as macros %}
{# quick_adjust.html #}
{# Version: 1.2.16 #}
{# Note: Kept for standalone access but redirects to modal on /. Fixed CSRF token ID. Compatible with app.py (1.2.96), incentive_service.py (1.2.25), config.py (1.2.6), forms.py (1.2.14), incentive.html (1.2.37), admin_manage.html (1.2.33), script.js (1.2.73), style.css (1.2.22), base.html (1.2.21), macros.html (1.2.10), start_voting.html (1.2.7), settings.html (1.2.6), admin_login.html (1.2.5), history.html (1.2.6), error.html, init_db.py (1.2.4). #}

{% block content %}
    <h2>Quick Adjust Points</h2>

    {% if get_flashed_messages() %}
        {% for category, message in get_flashed_messages(with_categories=true) %}
            <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                {{ message|safe }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        {% endfor %}
    {% endif %}

    <div class="container">
        <p>Redirecting to main page for quick adjust...</p>
        <script>
            window.location.href = "{{ url_for('show_incentive') }}";
            document.addEventListener('DOMContentLoaded', function() {
                const quickAdjustModal = document.getElementById('quickAdjustModal');
                if (quickAdjustModal) {
                    const modal = new bootstrap.Modal(quickAdjustModal, { backdrop: 'static', keyboard: true, focus: true });
                    modal.show();
                    const points = "{{ points|default('') }}";
                    const reason = "{{ reason|default('') }}";
                    const employeeInput = quickAdjustModal.querySelector('#quick_adjust_employee_id');
                    const pointsInput = quickAdjustModal.querySelector('#quick_adjust_points');
                    const reasonInput = quickAdjustModal.querySelector('#quick_adjust_reason');
                    if (employeeInput) employeeInput.focus();
                    if (pointsInput) pointsInput.value = points;
                    if (reasonInput) reasonInput.value = reason || 'Other';
                }
            });
        </script>
    </div>
{% endblock %}